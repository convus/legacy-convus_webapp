-# Must pass in hypothesis citation
- skip_challenge ||= false
- citation ||= hypothesis_citation.citation
- rendering_challenge ||= false

.col-xl-6.mt-2.mb-2
  - if hypothesis_citation.quotes.none?
    - if display_dev_info?
      .only-dev-visible
        No quotes for Hypothesis Citation ID:
        %code
          = hypothesis_citation.id
  - else
    .hypothesis-quotes-block
      - if rendering_challenge
        %span.d-block.text-warning.mt-2 Challenged!
      - hypothesis_citation.quotes.each do |quote|
        %blockquote
          = quote.text

    %table.table-list.mb-0
      %tbody
        %tr
          %td Title
          %td
            = citation.title
        %tr
          %td URL
          %td
            = link_to citation.url, citation.url
        %tr
          %td Kind
          %td= citation.kind_humanized
        %tr
          %td Publication
          %td
            - if citation.publication.present?
              = link_to citation.publication.title, publication_path(citation.publication)
              - citation.publication.badges.keys.each do |badge|
                %em.small.less-strong
                  = CitationScorer.badge_humanized(badge)
        - unless citation.skip_published_at_field?
          %tr
            %td Published date
            %td= citation.published_date_str
        - unless citation.skip_author_field?
          %tr
            %td Author
            %td
              - if citation.authors.count < 2
                = citation.authors.first
              - else
                %ul
                  - citation.authors.each do |author|
                    %li
                      = author
        %tr
          %td DOI
          %td= citation.doi
    .row.small
      .col-6
        = link_to "view raw data", citation_path(citation), class: "gray-link"
      -# HIDING challenge citation for now - until we have
      -# -# Have to have variable class margin-top or it moves after collapsing expand
      -# - unless skip_challenge
      -#   .col-6.text-right
      -#     = link_to "Challenge citation", new_hypothesis_citation_path(hypothesis_id: @hypothesis.ref_id, challenged_hypothesis_citation_id: hypothesis_citation.id), class: "text-danger"

      -# %h4.mt-4 Scoring
      -# = render partial: "/citations/score", locals: { citation: citation, skip_header: true }
