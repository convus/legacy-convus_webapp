%h1
  Viewing Hypothesis

.row.mt-4
  .col-md-6

    - if @hypothesis.unapproved?
      .alert.alert-info
        - if @hypothesis.pull_request_number.present?
          %h4
            Hypothesis waiting on approval,
            = link_to "PR#{@hypothesis.pull_request_number}", @hypothesis.pull_request_url
        - else
          Waiting for pull request to be created, page will reload.
          -# NOTE: This will reload endlessly, which may not be what we want
          :javascript
            window.setTimeout(() => {location.reload();}, 1000);

    %table.table-list
      %tbody
        %tr
          %td Title
          %td= @hypothesis.title
        - if current_user&.developer?
          %tr.only-dev-visible
            %td slug
            %td= @hypothesis.to_param
        %tr
          %td GitHub
          %td
            = link_to @hypothesis.file_path, @hypothesis.github_html_url
            - if @hypothesis.pull_request_number.present?
              %br
              Approved by
              = link_to "PR#{@hypothesis.pull_request_number}", @hypothesis.pull_request_url
        %tr
          %td ID
          %td= @hypothesis.id
        %tr.small
          %td Direct quotation?
          %td= @hypothesis.has_direct_quotation
        %tr
          %td Tags
          %td
            - if @hypothesis.tags.any?
              %ul
                - @hypothesis.tags.each do |tag|
                  %li
                    = tag.title
        %tr
          %td Created at
          %td
            %span.convertTime
              = l @hypothesis.created_at, format: :convert_time
        %tr
          %td Citations
          %td= @citations.count




%h2.mt-4.mb-1 Citations

= render partial: "/citations/table", locals: { citations: @citations }
